<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Course Details</title>
</head>
<body>
    <h1>Course Details</h1>
    <div id="course-details">
        <h2>Loading...</h2>
    </div>
    <h2>Videos</h2>
    <ul id="video-list">
        <li>Loading...</li>
    </ul>

    <script>
        async function fetchCourseData() {
            try {
                const response = await fetch('../docs/course.json');
                if (!response.ok) {
                    throw new Error('Network response was not ok');
                }
                return await response.json();
            } catch (error) {
                console.error('Error fetching course data:', error);
            }
        }

        async function fetchVideoData() {
            try {
                const response = await fetch('../docs/video_data.json');
                if (!response.ok) {
                    throw new Error('Network response was not ok');
                }
                return await response.json();
            } catch (error) {
                console.error('Error fetching video data:', error);
            }
        }

        async function displayCourseDetails() {
            const urlParams = new URLSearchParams(window.location.search);
            const courseId = urlParams.get('id');

            if (courseId) {
                const courseData = await fetchCourseData();
                const course = courseData.find(course => course.id === courseId);
                if (course) {
                    const courseDetailsDiv = document.getElementById('course-details');
                    courseDetailsDiv.innerHTML = `
                        <h2>${course.title}</h2>
                        <p>${course.description}</p>
                    `;

                    const videoData = await fetchVideoData();
                    const videos = videoData.filter(video => course.videos.includes(video.id));
                    const videoList = document.getElementById('video-list');
                    videoList.innerHTML = '';
                    videos.forEach(video => {
                        const listItem = document.createElement('li');
                        listItem.innerHTML = `
                            <h3>${video.title}</h3>
                            <p>${video.description}</p>
                            <video controls>
                                <source src="${video.videoUrl}" type="video/mp4">
                                Your browser does not support the video tag.
                            </video>
                        `;
                        videoList.appendChild(listItem);
                    });
                } else {
                    console.error('Course not found');
                }
            } else {
                console.error('No course ID provided');
            }
        }

        displayCourseDetails();
    </script>
</body>
</html>
